# 口袋方舟更新计划



## 2024Q2

#### 〓易用性提升〓

**优化：对齐工具，提升模型规律摆放的效率。**

**痛点反馈：**创作者在遵循一定规律放置模型时，比如道路、路灯、栅栏等，往往需要自己计算好间距，在放置物体过程中或之后逐个修改Transform信息，以达到预期的规则，效率往往提不上去。

**迭代思路：**在对齐工具上，我们将新增“均匀分布”、“等距分布”功能，方便用户将模型沿选中轴向等间距地整齐排列，解决规律放置模型的效率低下问题。同时通过对齐工具完成规律模型放置之后，用户Hover确认按钮，就可以预览到模型对齐后的位置，方便随时调整与修改。

<video controls src="https://arkimg.ark.online/roadmap2024Q22.mp4"></video>



**优化：提升Transform操作体验，解决模型不易选中，改善鼠标移动模型旋转及缩放时，鼠标牵引幅度小问题；**

**痛点反馈：**Transform工具更新后，关于模型的轴线、框体不易选中问题反馈很多，模型本身在场景的编辑不是特别灵敏，总是需要创作者频繁再次选中。而在改变模型旋转及缩放这些操作时，也经常出现鼠标都拖出屏幕了，旋转都还不够180%度这种情况。

**迭代思路：**我们将重新调整Transform 在Gizmo中的样式，使创作者更易观察与选中，在使用旋转、缩放等功能时，鼠标牵引操作给模型带来变化，也将更加精准与轻松。



**优化：属性面板布局更新，增强信息密度，并且可通过TS插件脚本支持对属性面板进行自定义修改。**

**痛点反馈：**在很长一段时间里，属性面板的信息密度一直是创作者诟病的问题之一。属性名及属性不同行造成属性面板的信息过长，但展示的内容却不多。创作者调整一些参数时需要反复滑来滑去，效率不高。

**迭代思路：**我们将属性面板的布局调整为两栏布局，左侧为属性名称，右侧为属性输入控件，整体的属性面板信息量将会更密集，进而减少创作者为了寻找属性而产生的滑动操作。同时我们也新增了全部展开/全部折叠功能，一键展开或折叠属性组，提高用户定位目标属性的效率。另外创作者可以通过TS插件脚本对属性面板进行自定义修改，满足个性化的功能开发和设计需求

<img src="./../../../../../TyporaPic/1712641456181-1.png" alt="img" style="zoom: 50%;" />

**优化：支持跨房间服务器匹配，多场景一键编译，脚本/资源公用。**

**痛点反馈：**在玩家侧，由于涉及多个服务器匹配的情况，多场景有概率导致玩家匹配出现串房的问题。对体验的影响不小。在创作者使用方面，多个场景运行时，一些通用的脚本资源优化较少，带来一些额外的内存占用。

**迭代思路：**多场景将支持跨多个服务器进行匹配，并且提供匹配跳转后的锁房的功能。防止匹配成功后出现串房情况。同时工程内容将新增「公用资源」，用来存储多个场景公用的一些资源与脚本，以此提高效能，优化内存。另外，我们也提供了一键编译的功能，解决每次只能编译一个场景的繁琐操作。



**优化：材质编辑易用性，提高用户操作模型外观表现的便利性和自由度（自Q1延误）**

痛点反馈：材质系统经历了一轮重构与调整，关于材质的大部分操作都整合至材质编辑器中，但创作者在多数场景下只是想要进行一些基本属性的修改，而进入材质编辑器的操作显然十分不便。而同一个自定义材质应用在两个模型后，改变其中一个模型的材质属性，另一个模型也会受影响，这也让创作者困惑不已。

优化形式：我们将常用的材质属性将暴露在属性面板可直接修改，不用再打开材质编辑器；而应用在模型上的自定义材质的修改也将只作用于该模型自身。



**优化：角色支持更改替换默认姿态。**

**痛点反馈：**当前的角色系统，我们虽然新增了全新姿态，但角色本身默认的姿态仍旧无法体验，比如跳跃，跑步等，创作者往往需要剑走偏分，比如用新的动画去盖掉触发后的姿态，以此达到表现上更替了姿态的效果。有时候还无法找到合适可以用于覆盖的动画。

**迭代思路：**为此，我们将支持角色的默认姿态替换，配合自定义动画，创作者可以基于现有的动画进行修改，抑或是通过角色骨骼进行新的动画制作。



**优化：音效、特效、交互物等对象，去除单双端概念。**

**痛点反馈：**目前编辑器仍旧存在不少客户端对象，但在游戏中却需要进行状态同步。双端通信的理解、区分服务端客户端、理解游戏服务器框架等，门槛着实不低。面对该类对象，新手创作者通常难以编写健壮的同步逻辑以至于项目经常出现表现异常的情况。

**迭代思路：**针对音效、特效对象进行同步逻辑的封装，支持在服务端直接使用。此外对于交互物、触发器、禁行区和IK对象在编辑态采用默认双端设置，创作者可以直接在服务端创建和使用。



#### 〓全新功能〓

**新功能：支持 聚簇光和体素光类型的点光源（自Q1延误）**

**痛点反馈：**创作者在设计游戏场景时，想要获得更好的氛围感，往往只能去调整后处理、雾、以及天空球。虽然能获得整体氛围的提升，但是在室内或局部场景上总是不甚满意。

**迭代思路：**我们将支持聚簇光和体素光，通过这些点光源，我们很容易制作出一些强化细节的氛围表现，如昏暗场景下的吊灯，角落的绿紫色的阴森效果，以此提升美术表现与游戏氛围感。



**新功能：实体建模功能（自Q1延误）**

**痛点反馈：**在场景搭建上，创作者经常会使用基础模型拼搭一些组合效果，比如房屋建筑，但在处理门窗的时候，需要预留门窗位置，外围拼接其他的基础模型才可以实现，不仅繁琐，而且管理麻烦，用的多了还可能有性能问题。

**迭代思路：**我们将支持实体建模，允许多个基础模型组合为一个整体，也支持布尔运算删减基础模型的部位，通过2个基础模型就可以实现门窗效果。



**新功能：支持自定义插件扩展，开放共建插件生态；**

**痛点反馈：**编辑器提供的界面和功能无法满足创作者特定工作流，例如用户定义技能（动画+特效+伤害判定），但是无法在编辑态下配置技能和实施预览的情况下，效率很难提升，此外编辑器样式和功能有更多接入其他软件或者程序的需求，例如AI问答机器人或者翻译工具。

**迭代思路：**提供编辑器插件化API，用于处理创作者对游戏开发阶段的拓展需求帮助提效和拓展编辑器功能，包括工程内容、对象管理器、属性面板、编辑器工作区、资源库、视口、文件操作、窗口和UI。

<img src="./../../../../../TyporaPic/1712742422674-4.png" alt="img" style="zoom: 67%;" />

**新功能：新增基础人形与多足的NPC对象资源，并且有相关角色属性。**

**痛点反馈：**创作者在制作一些以战斗为主的游戏类型，如RPG、肉鸽等，往往敌人单位的可选空间都比较少，需要妥协使用人形资源或需要自己上传资源再作二次编辑的形式去解决。

**迭代思路：**针对游戏中常见的敌人类型，将补充大量基于基础人形、多足等NPC资源，如鱼类、东方龙、西方龙、人马、蛇女、人形蜘蛛、狼人等。后续将会根据相关骨骼资源生产相关资源，补充更多资源共创作者使用。



**新功能：支持 字体切换功能，资源库新增可以使用的字体资源；**

**痛点反馈：**创作者在制作游戏UI时候，经常会碰到一些需要文字表现力强的场景，如强调胜利结算界面的“WIN”，战斗游戏里经常出现的伤害跳字，目前文字组件的描边与颜色并不能很好的解决这一点，有时候需要依赖外部资源的上传。

**迭代思路：**我们将更新若干套字体资源，兼顾视觉表现力和风格，同时也可以很好的控制游戏体量及性能，给创作者提供优化UI表现的情况下，不影响游戏本身的基础体验和兼容性。



**新功能：自定义特效对象：**

**痛点反馈：**资源库默认提供的特效动画的使用局限性比较大，无法二次编辑，API控制的也有限。一些特殊效果往往需要妥协以及通过自制资源的形式解决。

**迭代思路：**后期将上线的特效会开放更多参数，玩家可以自定义特效的一些效果，比如特效的粒子喷射速度、轨迹等，自由度更高。玩家可以直接通过自定义特效对象就可以完成一些效果的设计。



**新功能：死亡边界功能；**

**痛点反馈：**创作者在一些特定游戏类型，比如跑酷、乱斗时，角色往往离开指定的区域、边界会造成死亡或失败的效果，这些在现在都需要单独处理逻辑。初学者的练习与类型游戏的实现上，这部分的逻辑还是有一定的工作量。

**迭代思路：**我们将支持配置角色的死亡边界，当角色离开区域时，触发死亡并返回到距离最近的出生点，非常有利于初学者使用以快速搭建类型游戏时节省编码量。



**新功能：UI编辑器支持更多新控件（如 序列帧、遮罩、列表视图等），提升复杂UI界面制作便利度；**

**痛点反馈：**随着创作者制作的游戏类型越加丰富，UI编辑器现有组件开始呈现瓶颈，如制作滑动列表、实现遮找罩效果都需要不小的工程。

**迭代思路：**我们将支持更多的UI控件，以高集成的控件来解决复杂UI问题，如序列帧、遮罩、列表视图等。



**新功能：不可靠RPC函数 & 不可靠事件**

**痛点反馈：**目前MW提供的的RPC函数和事件都是可靠的。可靠消息无论是服务端->客户端还是客户端->服务端，都会进入消息堆栈预备重发保障消息的可靠性。一旦超过堆栈限制就容易导致断线。目前创作者缺乏手段去定制不重要的消息的可靠性。因此一旦通信频率和总数过大就会导致断线。

**迭代思路：**提供不可靠RPC函数 & 不可靠事件。方便用户自己定义通信的可靠性。针对不重要消息可以使用不可靠通信，不占用消息堆栈，解决断线问题。



**新功能：对象支持自定义同步属性**

**痛点反馈：**目前GameObject不支持用户新增自定义属性。很多属性同步需要使用脚本的自定义属性功能来实现。属性和对象没有绑定导致编写代码时使用不便。此外，创作者往往通过tag属性string类型来作为替代方案，使用较为繁琐且缺少同步回调。

**迭代思路：**GameObject支持自定义同步属性，允许创作者向对象身上动态添加不同类型的同步属性，同时也支持属性同步回调。这样后续针对对象可以便利的扩展业务属性，例如角色对象可以新增血量，攻击力等常见属性，也可以直接通过对象进行修改和触发修改回调函数，执行对应的游戏逻辑。



**新功能：聊天服务**

**痛点反馈：**目前平台聊天服务仅能进行一些简单的交流，无法实现类似狼人杀，队伍开黑，网游聊天频道等需求。如果创作者使用网络通信传输聊天文本传说开发成本非常大，还会占用宝贵的通信消息栈和消耗额外的流量。

**迭代思路：**提供一套通用的处理游戏文本聊天的服务，包括管理频道、装饰消息、过滤文本、创建命令，并且支持创作者自定义聊天界面。

<img src="./../../../../../TyporaPic/1712742422674-5.png" alt="img" style="zoom:50%;" />



**新功能：性能监测工具**

**痛点反馈：**创作者在游戏后期调试与优化性能的时候，往往没有可供参考的数据，只能凭借自己的开发经验和游戏的总体指标例如帧时间和渲染时间来推测问题原因，调试时无法即时查看调试结果，非常影响整体的游戏开发效率。

**迭代思路：**提供相对详细的性能检测工具，包括可视化面板和接口。工具帮助监测游戏性能重要指标例如动画耗时、物理计算耗时、UItick耗时、函数耗时、各对象内存占用、渲染耗时。性能工具还会进一步提供各类数量统计例如RPC消息数量，双端同步对象数量，动静态对象数量，各类型对象数量等。此外还会新增一个log窗口用于协助开发者调试项目逻辑，查看运行结果。同时也提供移动端的简要性能指标展示。

<img src="./../../../../../TyporaPic/1712742422674-6.png" alt="img" style="zoom:50%;" />



## 2024Q1

#### 〓易用性提升〓

**优化：资源库分区（本地与网络）；提升检索效率和引入同风格资源包**；
痛点反馈：创作者常出现两极的反馈：一方面认为美术资源库丰富、惊艳于Demo场景的美术效果，另一方面又觉得合适的资源很少。从数据来看，资源库体量庞大但使用分布非常不均（近20万资源量里，曾被多项目使用的只有5000个不到），反映出实际问题来自资源库检索相关功能（搜索、资源分类、相似风格资源匹配、缩略图预览效果）在当下并不能很好满足创作者的需求。
优化形式：我们将把资源库分为“本地”和“网络”两个分区。“本地”资源分区将展示当前项目所使用的资源及本地上传的资源，提高当下高热资源的操作便利度。“网络”资源分区的优化目标则是检索的准确率。第一，创作者将有更直观的资源预览，如更大的资源缩略图、动作及姿态直接在缩略图播放等；第二，我们将加强关键词搜索的准确性，尽可能将关联性强的资源的排序靠前展示；第三，我们将引入资源组合包，按照成套的资源进行推荐，来解决相似风格资源查找困难的问题。



**优化：Transform支持中心/锚点 两种模式；**
痛点反馈：Transform工具的对齐、旋转、缩放操作均基于锚点进行，不同类型资源的锚点有可能不同，比如基础模型是中心锚点，路面地板的模型通常为四边锚点，在包含两类模型进行编辑和对齐的时候很难兼顾，使用空锚点又非常麻烦。
优化形式：我们为Transform增加了中心点模式，不同锚点的资源可以遵循统一的逻辑，在操作旋转、缩放、移动、对齐时，不会出现表现不一致的情况。



**优化：热武器封装更多业务功能（音效特效表现、子弹检测等），提升开箱即用性；**
痛点反馈：在热武器需求调研及设计之初，有用户曾反馈希望热武器模块能有足够高的开放灵活性。回头看，当前的热武器封装抽象度过高，在熟悉热武器工作机制的前提下，需要调用10个以上的接口才能实现开火射击的效果。在表现层上，也没提提供拾取 、丢弃、持枪常见的动作表现。实际上没有为更多作者提供足够低的门槛去创作射击类游戏。
优化形式：我们将重构热武器对象，提供更加简易的接口，比如子弹表现，弹道检测，击中回调等功能。现在再实现射击开火，配置一个子弹资源，调用一个方法即可实现。同时在预设能力中补充了不少易用的功能，如视角支持人称切换和瞄准缩放；在表现层上则提供操作热武器的常见动作如拔枪、收枪、持枪等，常用的特效、音效也囊括其中。而有更复杂热武器需求的创作者，可以在此基础上另外进行二次开发。



**优化：材质编辑易用性，提高用户操作模型外观表现的便利性和自由度；**
痛点反馈：材质系统经历了一轮重构与调整，关于材质的大部分操作都整合至材质编辑器中，但创作者在多数场景下只是想要进行一些基本属性的修改，而进入材质编辑器的操作显然十分不便。而同一个自定义材质应用在两个模型后，改变其中一个模型的材质属性，另一个模型也会受影响，这也让创作者困惑不已。
优化形式：我们将常用的材质属性将暴露在属性面板可直接修改，不用再打开材质编辑器；而应用在模型上的自定义材质的修改也将只作用于该模型自身。



**优化：碰撞机制，提高易用性与自由度；**
痛点反馈：由于碰撞功能的耦合度较高，在使用上缺乏自由度，比如无法自定义对象间的碰撞结果，射线检测受碰撞限制无法进行通道选择，造成难以过滤冗余对象，引起性能问题等。
优化形式：我们将在兼容旧的碰撞下，支持碰撞层级关系，如对象类型，响应结果与事件抛出。支持碰撞组，方便创作者自定义对象碰撞的响应结果。



#### 〓全新功能〓

**新功能：资源先用后审，非公开资源团队共享；**
痛点反馈：创作者使用自有资源需要上传等待审核，等到通过后方可继续使用，创作者经常反馈审核速度慢，时间不确定。另外，上传的资源仅可在自己的个人账号使用，对多人协作使用上局限性也很大。
迭代思路：我们支持自有资源可以直接本地导入使用，而上传及审核流程将后置，不干扰创作者当下场景中的资源使用。同时通过审核的自有资源可以在团队共享，也可以指定创作者分享，提升多人协作的便利性。



**新功能：角色/NPC多种新增姿态如攀爬、飞行等；**
痛点反馈：目前，角色支持的姿态较少，缺乏细节表现。一些常用的效果如攀爬，也需要创作者自己实现，这在角色本身的应用上局限性较大。
迭代思路：我们将支持优化角色的姿态表现，增加更多动作细节，同时支持更多基础姿态（新增攀爬、推动、死亡等状态和效果），我们也将支持自定义动画，配合新上架的动画资源，可以快速实现包括待机、攻击、死亡等动画效果。



**新功能：物理约束组件（如 物理连接、物理力区域）；**
痛点反馈：物理模拟相关的功能，目前编辑器支持较少。在制作包含物理表现的机关及玩法上，实现存在困难。
迭代思路：我们将常用的物理模拟功能制作成逻辑对象，提供给用户直接使用，以此可以在不需要编写脚本的情况下，快速的制作出绳子、鱼竿、风洞等物理效果，并通过属性面板修改相关参数，达到更多的变化。



**新功能：游戏支持配置多个场景，场景间继承游戏数据；**
痛点反馈：创作者在制作大地图、战斗房间匹配、副本、关卡类等游戏的时候，只能通过单一工程，或者同时维护多个游戏gameid互相跳转来实现。导致面临内存超载等性能问题、不同区域/副本的数据统计复杂、跨游戏场景间的用户数据CustomData同步麻烦等问题。
迭代思路：我们将支持单游戏下多场景功能。创作者可通过API接口实现场景间跳转，无论是制作大场景多区域RPG、还是多个副本/关卡/战斗皮欸，都将更加简单。同时各个场景只要存储数据，另一个游戏就可以获取到相关数据，如角色在A场景因受伤扣除了1000血量，进入B场景也会是扣除后的血量数值。此外，在创作者中心，对应的场景可查看对应的数据变现，方便游戏调优寻查看数据。



**新功能：实体建模功能；**
痛点反馈：在场景搭建上，创作者经常会使用基础模型拼搭一些组合效果，比如房屋建筑，但在处理门窗的时候，需要预留门窗位置，外围拼接其他的基础模型才可以实现，不仅繁琐，而且管理麻烦，用的多了还可能有性能问题。
迭代思路：我们将支持实体建模，允许多个基础模型组合为一个整体，也支持布尔运算删减基础模型的部位，通过2个基础模型就可以实现门窗效果。



**新功能：角色五个部位的IK效果；**
痛点反馈：目前，我们没有提供IK功能支持，所以角色在上台阶，或者走在起伏地面上时，会出现脚步悬空，没有踩实的情况，表现就会很僵硬。
迭代思路：我们将提供IK对象方便用户针对手脚和盆骨进行动作表现的调整。角色将默认开启双脚IK功能，在起伏地形上能自动播放适应性脚部IK效果的动画。此外，我们可以将IK对象挂载至模型或其他对象上时，通过激活IK对象就可以开启指定角色部位的IK功能，以此实现将骨骼牵引至目标点，这样就可以避免穿模，让动作更加自然。

